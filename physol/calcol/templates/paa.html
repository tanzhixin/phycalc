<!DOCTYPE html>
<html>
<head>
    <title>质子活化活度计算</title>
    <style>
        .container {
            max-width: 800px;
            margin: 30px auto;
            padding: 25px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            font-family: Arial, sans-serif;
        }
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #34495e;
        }
        input[type="datetime-local"], 
        input[type="number"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #3498db;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #2980b9;
        }
        .result {
            margin-top: 25px;
            padding: 20px;
            background-color: #ecf0f1;
            border-radius: 4px;
        }
        .error {
            color: #e74c3c;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #e74c3c;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>质子活化活度计算器</h2>
        
        <form method="post">
            {% csrf_token %}
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="irradiation_start">辐照开始时间：</label>
                    <input type="datetime-local" 
                           id="irradiation_start" 
                           name="irradiation_start"
                           required
                           value="{{ irradiation_start|default:'' }}">
                </div>

                <div class="form-group">
                    <label for="irradiation_end">辐照结束/冷却开始时间：</label>
                    <input type="datetime-local" 
                           id="irradiation_end" 
                           name="irradiation_end"
                           required
                           value="{{ irradiation_end|default:'' }}">
                </div>

                <div class="form-group">
                    <label for="cooling_end">冷却结束/测量开始时间：</label>
                    <input type="datetime-local" 
                           id="cooling_end" 
                           name="cooling_end"
                           required
                           value="{{ cooling_end|default:'' }}">
                </div>

                <div class="form-group">
                    <label for="measurement_end">测量结束时间：</label>
                    <input type="datetime-local" 
                           id="measurement_end" 
                           name="measurement_end"
                           required
                           value="{{ measurement_end|default:'' }}">
                </div>
            </div>

            <div class="form-group">
                <label for="half_life">半衰期 (小时)：</label>
                <input type="number" 
                       id="half_life" 
                       name="half_life"
                       step="0.0001"
                       required
                       value="{{ half_life|default:'' }}">
            </div>

	    <div class="form-group">
                <label for="half_life">反应截面 (barn)：</label>
                <input type="number" 
                       id="cross_section" 
                       name="cross_section"
                       step="0.0001"
                       required
                       value="{{ cross_section|default:'' }}">
            </div>

	    <div class="form-group">
                <label for="half_life">靶核面密度 (atoms/cm2)：</label>
                <input type="number" 
                       id="target_density" 
                       name="target_density"
                       step="0.0001"
                       required
                       value="{{ cross_section|default:'' }}">
            </div>

            <button type="submit">计算活度</button>
        </form>

        {% if error %}
            <div class="error">
                <strong>错误：</strong> {{ error }}
            </div>
        {% endif %}

        {% if result %}
            <div class="result">
                <h3>计算结果：</h3>
                <p>辐照持续时间：{{ result.irradiation_duration }} 小时</p>
                <p>冷却时间：{{ result.cooling_time }} 小时</p>
                <p>测量持续时间：{{ result.measurement_duration }} 小时</p>
                <p>衰变常数 (λ=\frac{ln2}{t_{1/2}})： </p>
		<p>     {{ result.decay_constant|floatformat:6 }} h⁻¹</p>
                <p>饱和因子：{{ result.saturation_factor|floatformat:4 }}</p>
                <p>衰变因子：{{ result.decay_factor|floatformat:4 }}</p>
                <p>测量校正因子：{{ result.measurement_factor|floatformat:4 }}</p>
                <h4>最终活度：{{ result.final_activity|floatformat:2 }} Bq</h4>
            </div>
        {% endif %}
    </div>
</body>
</html>


